{% block image_widget %}
  {% set property = form.vars.object_property | default(form.vars.name) %}
  {% set preview = form.vars.preview %}
  {% if form.vars.object | is_uploaded(property) %}
    <div class="thumbnail-holder">
      {% if preview %}
      <a href="{{ vich_uploader_asset(form.vars.object, property) | imagine_filter(preview) }}" class="colorbox">
        {% endif %}
        <img class="thumbnail"
             src="{{ vich_uploader_asset(form.vars.object, property) | imagine_filter(form.vars.filter) }}" alt=""/>
        {% if preview %}</a>{% endif %}
    </div>
  {% endif %}
  {{ block('form_widget_simple') }}
{% endblock image_widget %}

{% block image_delete_widget %}
  <div class="image-delete-widget">
    {{ form_row(form.file) }}
    {% if form.parent.vars.data | is_uploaded(form.vars.name) %}
      {{ form_row(form.delete) }}
    {% endif %}
  </div>
{% endblock image_delete_widget %}

{% block file_delete_widget %}
  <div class="file-delete-widget">
    <p>{{ form.parent.vars.data | is_uploaded(form.vars.name) }}</p>
    {{ form_row(form.file) }}
    {% if form.parent.vars.data | is_uploaded(form.vars.name) %}
      {{ form_row(form.delete) }}
    {% endif %}
  </div>
{% endblock file_delete_widget %}

{% block file_download_widget %}
  <div class="file-download-widget well">
    {% set uploaded_path = form.parent.vars.data | is_uploaded(form.vars.name) %}
    {% if uploaded_path | length %}
      <p><a href="{{ url_prefix ~ uploaded_path }}">{{ form.vars.data.filename | default('Download') }}</a></p>
    {% else %}
      <div class="not-uploaded"><span class="btn btn-warning">Not uploaded yet</span></div>
    {% endif %}
    {{ form_widget(form) }}
  </div>
{% endblock %}